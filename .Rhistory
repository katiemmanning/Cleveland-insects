dev.off()
rich.emm<-emmeans(richmodel.n,pairwise~sitetype) #comparing natural vs GR
rich.emm
##Natural enemy richness linear model
richmodel.n <- lmer(richness~Date + sitetype + Trap + (1|Site:Replicate), data=NE)  #AIC = 1104
summary(richmodel.n)
AIC(richmodel.n)
anova(richmodel.n)
rich.emm<-emmeans(richmodel.n,pairwise~sitetype) #comparing natural vs GR
rich.emm
rich.emm<-emmeans(richmodel.n,pairwise~sitetype) #comparing natural vs GR
rich.emm
#results: no difference between natural (higher) and green roofs (p = 0.115)
rich.cld<-multcomp::cld(rich.emm, alpha = 0.05, Letters = LETTERS)
rich.cld
##Natural enemy diversity linear model
divmodel.n <- lmer(diversity~Date + sitetype + Trap + (1|Site:Replicate), data=NE)  #AIC = 275
summary(divmodel.n)
AIC(divmodel.n)
anova(divmodel.n)
div.emm<-emmeans(divmodel.n,pairwise~sitetype)
div.emm
rich.emm<-emmeans(richmodel.n,pairwise~sitetype) #comparing natural vs GR
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
div.emm.t<-emmeans(divmodel.n,pairwise~Trap)
div.emm.t
##Natural GR enemy richness linear model
richmodel.n <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofNE)  #AIC = 569
rich.emm<-emmeans(richmodel.n,pairwise~design) #comparing SE and BE
rich.emm
##Natural enemy diversity linear model
divmodel.n <- lmer(diversity~Date + design + Trap + (1|Site:Replicate), data=greenroofNE)  #AIC = 129
summary(divmodel.n)
AIC(divmodel.n)
anova(divmodel.n)
div.emm<-emmeans(divmodel.n,pairwise~design)
div.emm
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
div.emm.t<-emmeans(divmodel.n,pairwise~Trap)
div.emm.t
#trap names
ramps19$Trap="ramp"
jars21$Trap="jar"
#merge
library (plyr)
ramps <- rbind.fill (ramps19, jars21)
View(ramps)
View(ramps19)
insects.abun <- rowSums(ramps19[,5:44])
ramps19$abundance <- insects.abun
insects.rowsums <- rowSums(ramps19[,5:44]>0)
ramps19$richness <- insects.rowsums
#need vegan to run diversity and evenness
diversity <-diversity(ramps19[,5:44])
ramps19$diversity <-diversity
evenness <-diversity/log(specnumber(ramps19[,5:44]))
ramps19$evenness <- evenness
insects.abun <- rowSums(jars21[,5:44])
jars21$abundance <- insects.abun
insects.rowsums <- rowSums(jars21[,5:44]>0)
jars21$richness <- insects.rowsums
diversity <-diversity(jars21[,5:44])
jars21$diversity <-diversity
evenness <-diversity/log(specnumber(jars21[,5:44]))
jars21$evenness <- evenness
mean(ramps19$abundance) #72.35
sd(ramps19$abundance)/sqrt(10) #58.84
mean(ramps19$richness) #5.82
sd(ramps19$richness)/sqrt(10) #0.88
mean(ramps19$diversity) #1.16
sd(ramps19$diversity)/sqrt(10) #0.15
mean(ramps19$evenness) #0.71
sd(ramps19$evenness)/sqrt(10) #0.06
mean(jars21$abundance) #7.43
sd(jars21$abundance)/sqrt(10) #3.84
mean(jars21$richness) #2.46
sd(jars21$richness)/sqrt(10) #0.54
mean(jars21$diversity) #0.59
sd(jars21$diversity)/sqrt(10) #0.19
mean(jars21$evenness) #NA
sd(jars21$evenness)/sqrt(10) #NA
#Create matrix of environmental variables
env.matrix_ramps<-ramps[c(1:4,45)]
#create matrix of community variables
com.matrix_ramps<-ramps[c(5:44)]
#species accumulation
library (BiodiversityR)
library(ggplot2)
#individual curves for each trap type
ramp.com.matrix<-ramps19[c(5:44)]
ramp_curve<-accumresult(ramp.com.matrix, method = "exact", permutations = 1000)
jar.com.matrix<-jars21[c(5:44)]
jar_curve<-accumresult(jar.com.matrix, method = "exact", permutations = 1000)
#calculates order richness for each sample
specnumber(com.matrix_ramps) #ranges from 1 to 14
#calculates order richness by treatment (trap)
specnumber(com.matrix_ramps, groups = ramps$Trap) #jar=19; ramp=29
#total richness and jackknife
rich <- diversityresult(com.matrix_ramps, y=NULL, index = "richness")
rich # 32
j1 <- diversityresult(com.matrix_ramps, y=NULL, index = "jack1")
j1 # 34.976
#91%
j2 <- diversityresult(com.matrix_ramps, y=NULL, index = "jack2")
j2 # 31.095548
#ramp jackknife; richness = 29
j1.r <- diversityresult(ramp.com.matrix, y=NULL, index = "jack1")
j1.r # 31.95
#91%
j2.r <- diversityresult(ramp.com.matrix, y=NULL, index = "jack2")
j2.r # 30.098588
#jar jackknife; richness = 19
j1.j <- diversityresult(jar.com.matrix, y=NULL, index = "jack1")
j1.j # 23.923077
#79%
j2.j <- diversityresult(jar.com.matrix, y=NULL, index = "jack2")
j2.j # 23.998798
#BiodiversityR::accumcomp
Accum.1 <- accumcomp(com.matrix_ramps, y=env.matrix_ramps, factor='Trap',
method='random', conditioned=FALSE, plotit=FALSE)
Accum.1
#BiodiversityR::accumcomp.long
accum.long1 <- accumcomp.long(Accum.1, ci=NA, label.freq=5)
head(accum.long1)
#plot
#empty canvas
BioR.theme <- theme(
panel.background = element_blank(),
panel.border = element_blank(),
panel.grid = element_blank(),
axis.line = element_line("gray25"),
text = element_text(size = 12),
axis.text = element_text(size = 10, colour = "gray25"),
axis.title = element_text(size = 14, colour = "gray25"),
legend.title = element_text(size = 14),
legend.text = element_text(size = 14),
legend.key = element_blank())
accum <- ggplot(data=accum.long1, aes(x = Sites, y = Richness, ymax = UPR, ymin = LWR)) +
scale_x_continuous(expand=c(0, 1), sec.axis = dup_axis(labels=NULL, name=NULL)) +
scale_y_continuous(sec.axis = dup_axis(labels=NULL, name=NULL)) +
scale_color_manual(values=c("gray","black"))+
scale_shape_manual(values=c(19,17,15,25))+
geom_line(aes(colour=Grouping), size=0.1) +
geom_ribbon(aes(colour=Grouping, fill=after_scale(alpha(colour, 0.3))),
show.legend=FALSE, linetype = 0) +
geom_point(data=subset(accum.long1, labelit==TRUE),
aes(colour=Grouping, shape=Grouping), size=3) +
BioR.theme +
labs(x = "Number of samples", y = "Richness", colour = "Trap", shape = "Trap")
accum
pdf("accum curves.pdf", height=6, width=8) #height and width in inches
accum
dev.off()
#bring in data pooled by date-site
allbugs_pooled <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/allbugs_2019%20and%202021_pooled.csv", na.strings = NULL)
#bring in beneficial insects taxa info
taxa <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/allbugs_taxa.csv", na.strings=NULL)
#Create matrix of environmental variables
env.matrix<-allbugs_pooled[c(1:3)]
#create matrix of community variables
com.matrix<-allbugs_pooled[c(4:43)]
#change to presence/absence
com.matrix[com.matrix > 0] <- 1
str(com.matrix)
#ordination by NMDS
NMDS<-metaMDS(com.matrix, distance="jaccard", k=2, autotransform=TRUE, trymax=300)
NMDS
###stress = 0.20
stressplot(NMDS)
#what taxa to display using "taxa"
pollinator<-as.vector(t(taxa[1,]))
pollinator<-pollinator[-1]
natural_enemies<-as.vector(t(taxa[2,]))
natural_enemies<-natural_enemies[-1]
include<-as.vector(t(taxa[3,]))
include<-include[-1]
#plot NMDS
#might need to change colors
#8 x 13
plot(NMDS, disp='sites', type="n")
#title(main="Arthropod community composition by site type", cex.main=1.5)
#add ellipsoids with ordiellipse
ordiellipse(NMDS, env.matrix$sitetype, draw="polygon", col="#009E73",kind="sd", conf=0.95, label=FALSE, show.groups = "Greenroof")
ordiellipse(NMDS, env.matrix$sitetype, draw="polygon", col="#E69F00",kind="sd", conf=0.95, label=FALSE, show.groups = "Natural")
#add data points
points(NMDS, display="sites", select=which(env.matrix$sitetype=="Natural"),pch=19, col="#E69F00")
points(NMDS, display="sites", select=which(env.matrix$sitetype=="Greenroof"), pch=17, col="#009E73")
#add legend
legend(0.92,0.68, title=NULL, pch=c(19,17), col=c("#E69F00","#009E73"), cex=1.5, legend=c("Natural", "Greenroof"))
#add insect taxa as text
ordilabel(NMDS, display="species", select =which (include==TRUE & pollinator == TRUE), cex=0.6, col="black", fill="white")
ordilabel(NMDS, display="species", select =which (include==TRUE & natural_enemies == TRUE), cex=0.6, col="white", fill="black")
#bootstrapping and testing for differences between the groups (regions)
fit<-adonis(com.matrix ~ sitetype, data = env.matrix, permutations = 999, method="bray")
fit
#check assumption of homogeneity of multivariate dispersion
#P-value greater than 0.05 means assumption has been met
distances_data<-vegdist(com.matrix)
anova(betadisper(distances_data, env.matrix$sitetype))
#NMDS of natural versus SE green roof
SE <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/allbugs_pooled_SE%20and%20natural.csv", na.strings=NULL)
#Create matrix of environmental variables
env.matrix_SE<-SE[c(1:3)]
#create matrix of community variables
com.matrix_SE<-SE[c(4:43)]
#change to presence/absence
com.matrix_SE[com.matrix_SE > 0] <- 1
str(com.matrix_SE)
rowSums(com.matrix_SE)
#ordination by NMDS
NMDS_SE<-metaMDS(com.matrix_SE, distance="bray", k=2, autotransform=TRUE, trymax=300)
NMDS_SE
#ordination by NMDS
NMDS_SE<-metaMDS(com.matrix_SE, distance="jaccard", k=2, autotransform=TRUE, trymax=300)
NMDS_SE
###stress = 0.18
stressplot(NMDS_SE)
#plot
plot(NMDS_SE, disp='sites', type="n")
#add ellipsoids with ordiellipse
ordiellipse(NMDS_SE, env.matrix_SE$type, draw="polygon", col="#009E73",kind="sd", conf=0.95, label=FALSE, show.groups = "SE")
ordiellipse(NMDS_SE, env.matrix_SE$type, draw="polygon", col="#E69F00",kind="sd", conf=0.95, label=FALSE, show.groups = "Natural")
#add data points
points(NMDS_SE, display="sites", select=which(env.matrix_SE$type=="Natural"),pch=19, col="#E69F00")
points(NMDS_SE, display="sites", select=which(env.matrix_SE$type=="SE"), pch=17, col="#009E73")
#bootstrapping and testing for differences between the groups (SE and natural)
fit<-adonis(com.matrix_SE ~ type, data = env.matrix_SE, permutations = 999, method="bray")
fit
#NMDS of natural versus BE green roof
BE <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/allbugs_pooled_BE%20and%20natural.csv", na.strings=NULL)
#Create matrix of environmental variables
env.matrix_BE<-BE[c(1:3)]
#create matrix of community variables
com.matrix_BE<-BE[c(4:43)]
#change to presence/absence
com.matrix_BE[com.matrix_BE > 0] <- 1
str(com.matrix_BE)
rowSums(com.matrix_BE)
#ordination by NMDS
NMDS_BE<-metaMDS(com.matrix_BE, distance="jaccard", k=2, autotransform=TRUE, trymax=300)
NMDS_BE
###stress = 0.18
stressplot(NMDS_BE)
plot(NMDS_BE, disp='sites', type="n")
#add ellipsoids with ordiellipse
ordiellipse(NMDS_BE, env.matrix_BE$type, draw="polygon", col="#CC79A7",kind="sd", conf=0.95, label=FALSE, show.groups = "BE")
ordiellipse(NMDS_BE, env.matrix_BE$type, draw="polygon", col="#009E73",kind="sd", conf=0.95, label=FALSE, show.groups = "Natural")
#add data points
points(NMDS_BE, display="sites", select=which(env.matrix_BE$type=="Natural"),pch=19, col="#009E73")
points(NMDS_BE, display="sites", select=which(env.matrix_BE$type=="BE"), pch=17, col="#CC79A7")
#bootstrapping and testing for differences between the groups (BE and natural)
fit<-adonis(com.matrix_BE ~ type, data = env.matrix_BE, permutations = 999, method="bray")
fit
#check assumption of homogeneity of multivariate dispersion
#P-value greater than 0.05 means assumption has been met
distances_data<-vegdist(com.matrix_BE)
anova(betadisper(distances_data, env.matrix_BE$type))
#install.packages("devtools")
library(devtools)
install.packages("devtools")
#install_github("pmartinezarbizu/pairwiseAdonis/pairwiseAdonis")
library(pairwiseAdonis)
pairwise.adonis(com.matrix, env.matrix$sitetype)
#bring in data pooled by date-site
greenroofbugs_pooled <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/greenroofbugs_2019%20and%202021_pooled.csv", na.strings = NULL)
#Create matrix of environmental variables
env.matrix_gr<-greenroofbugs_pooled[c(1:3)]
#create matrix of community variables
com.matrix_gr<-greenroofbugs_pooled[c(4:43)]
#change to presence/absence
com.matrix_gr[com.matrix_gr > 0] <- 1
str(com.matrix_gr)
rowSums(com.matrix_gr)
#ordination by NMDS
NMDS_gr<-metaMDS(com.matrix_gr, distance="jaccard", k=2, autotransform=TRUE, trymax=300)
NMDS_gr
###stress = 0.16
stressplot(NMDS_gr)
#bootstrapping and testing for differences between the groups (BE v SE)
fit<-adonis(com.matrix_gr ~ design, data = env.matrix_gr, permutations = 999, method="bray")
fit
#check assumption of homogeneity of multivariate dispersion
#P-value greater than 0.05 means assumption has been met
distances_data<-vegdist(com.matrix_gr)
anova(betadisper(distances_data, env.matrix_gr$design))
#bootstrapping and testing for differences between the groups (BE v SE)
fit<-adonis(com.matrix_gr ~ Site, data = env.matrix_gr, permutations = 999, method="bray")
fit
library (pairwiseAdonis)
pairwise.adonis(com.matrix_gr, env.matrix_gr$Site)
#check assumption of homogeneity of multivariate dispersion
#P-value greater than 0.05 means assumption has been met
distances_data<-vegdist(com.matrix_gr)
anova(betadisper(distances_data, env.matrix_gr$Site))
bowls19 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202019%20-%20Bowl_cleveland.csv",na.strings = NULL)
summary(bowls19)
str(bowls19)
ramps19 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202019%20-%20Ramp_cleveland.csv",na.strings = NULL)
summary(ramps19)
str(ramps19)
sticky19 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202019%20-%20Sticky%20card_cleveland.csv",na.strings = NULL)
summary(sticky19)
str(sticky19)
bowls19$Trap="bowl"
ramps19$Trap="ramp"
sticky19$Trap="sticky"
#combine data tables
##rbind.fill instead of rbind let's us have datasets with different columns (but then you'd have to get rid of NAs)
library (plyr)
bowlramp19 <- rbind.fill (bowls19, ramps19)
allbugs19 <-rbind.fill (bowlramp19, sticky19)
#add column for natural vs green roof
allbugs19$sitetype<-ifelse(allbugs19$Site=="SSH", "Natural",
ifelse(allbugs19$Site=="DGM", "Natural",
ifelse(allbugs19$Site=="BFB", "Natural", "Greenroof")))
str(allbugs19)
#To obtain richness counts
allbugs19.rowsums <- rowSums(allbugs19[,5:44]>0)
allbugs19$richness <- allbugs19.rowsums
#To obtain abundance counts
allbugs19.abun <- rowSums(allbugs19[,5:44])
allbugs19$abundance <- allbugs19.abun
#load vegan
library(vegan)
#calculate Shannon diversity
diversity <-diversity(allbugs19[,5:44])
allbugs19$diversity <-diversity
#calculate Evenness
evenness <-diversity/log(specnumber(allbugs19[,5:44]))
allbugs19$evenness <- evenness
summary(allbugs19)
str(allbugs19)
#add data subset for green roof sites
greenroofbugs19 <- allbugs19[ which(allbugs19$sitetype=="Greenroof"), ]
#add column for green roof functional intent (stormwater-energy and biodiversity-ecological)
greenroofbugs19$design<-ifelse(greenroofbugs19$Site=="EWB", "SE",
ifelse(greenroofbugs19$Site=="WSC", "SE", "BE"))
str(greenroofbugs19)
#add data subset for natural sites
naturalbugs19 <- allbugs19[ which(allbugs19$sitetype=="Natural"), ]
str(naturalbugs19)
bowls21 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202021%20-%20Bowl.csv",na.strings = NULL)
summary(bowls21)
str(bowls21)
jars21 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202021%20-%20Jar.csv",na.strings = NULL)
summary(jars21)
str(jars21)
sticky21 <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/Insect%20ID%202021%20-%20Sticky%20card.csv",na.strings = NULL)
summary(sticky21)
str(sticky21)
bowls21$Trap="bowl"
jars21$Trap="jar"
sticky21$Trap="sticky"
#combine data tables
##rbind.fill instead of rbind let's us have datasets with different columns (but then you'd have to get rid of NAs)
#library (plyr)
bowljar21 <- rbind.fill (bowls21, jars21)
allbugs21 <-rbind.fill (bowljar21, sticky21)
#add column for natural vs green roof
allbugs21$sitetype<-ifelse(allbugs21$Site=="SSH", "Natural",
ifelse(allbugs21$Site=="DGM", "Natural",
ifelse(allbugs21$Site=="BFB", "Natural", "Greenroof")))
str(allbugs21)
#To obtain richness counts
allbugs21.rowsums <- rowSums(allbugs21[,5:44]>0)
allbugs21$richness <- allbugs21.rowsums
#To obtain abundance counts
allbugs21.abun <- rowSums(allbugs21[,5:44])
allbugs21$abundance <- allbugs21.abun
#calculate Shannon diversity
diversity <-diversity(allbugs21[,5:44])
allbugs21$diversity <-diversity
#calculate Evenness
evenness <-diversity/log(specnumber(allbugs21[,5:44]))
allbugs21$evenness <- evenness
summary(allbugs21)
str(allbugs21)
#add data subset for green roof sites
greenroofbugs21 <- allbugs21[ which(allbugs21$sitetype=="Greenroof"), ]
#add column for green roof functional intent (stormwater-energy and biodiversity-ecological)
greenroofbugs21$design<-ifelse(greenroofbugs21$Site=="EWB", "SE",
ifelse(greenroofbugs21$Site=="WSC", "SE", "BE"))
str(greenroofbugs21)
#add data subset for natural sites
naturalbugs21 <- allbugs21[ which(allbugs21$sitetype=="Natural"), ]
str(naturalbugs21)
allbugs <- rbind.fill (allbugs19, allbugs21)
str (allbugs)
library (emmeans) #for pairwise comparisons
library (lme4) #for linear mixed effects models
library (lmerTest) #to obtain p values for linear mixed effects models
library (multcompView) #to view letters
library (nortest)
library (bbmle)
library (DHARMa)
library (ggplot2)
library (sjPlot)
library (jtools)
library (interactions)
##richness linear model
richmodel <- lmer(richness~Date + sitetype + Trap + (1|Site:Replicate), data=allbugs)  #AIC = 1774
rich.emm.t<-emmeans(richmodel,pairwise~Trap)
rich.emm.t
##diversity linear model
divmodel <- lmer(diversity~Date + sitetype + Trap + (1|Site:Replicate), data=allbugs)  #AIC = 548
div.emm.t<-emmeans(divmodel,pairwise~Trap)
div.emm.t
##richness model
richmodel.d <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofbugs)  #AIC = 956
rich.emm.t<-emmeans(richmodel.d,pairwise~Trap)
#put together all 2019 and 2021 data
greenroofbugs <- rbind.fill (greenroofbugs19, greenroofbugs21)
##richness model
richmodel.d <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofbugs)  #AIC = 956
rich.emm.t<-emmeans(richmodel.d,pairwise~Trap)
rich.emm.t
##diversity linear model
divmodel.d <- lmer(diversity~Date + design + Trap + (1|Site:Replicate), data=greenroofbugs)  #AIC = 300
summary(divmodel.d)
div.emm.t<-emmeans(divmodel.d,pairwise~Trap)
div.emm.t
ramps19$Trap="ramp"
jars21$Trap="jar"
#merge
library (plyr)
ramps <- rbind.fill (ramps19, jars21)
P <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/pollinators_2019%20and%202021.csv", na.strings = NULL)
NE <- read.csv("https://raw.githubusercontent.com/katiemmanning/Cleveland-insects/main/natural%20enemies_2019%20and%202021.csv", na.strings = NULL)
#To obtain richness counts
P.rowsums <- rowSums(P[,6:8]>0)
P$richness <- P.rowsums
NE.rowsums <- rowSums(NE[,6:15]>0)
NE$richness <- NE.rowsums
#To obtain abundance counts
P.abun <- rowSums(P[,6:8])
P$abundance <- P.abun
NE.abun <- rowSums(NE[,6:15])
NE$abundance <- NE.abun
library(vegan)
#calculate Shannon diversity
P.diversity <-diversity(P[,6:8])
P$diversity <-P.diversity
NE.diversity <-diversity(NE[,6:15])
NE$diversity <-NE.diversity
#calculate Evenness
P.evenness <-P.diversity/log(specnumber(P[,6:8]))
P$evenness <- P.evenness
NE.evenness <-NE.diversity/log(specnumber(NE[,6:15]))
NE$evenness <- NE.evenness
##Pollinator richness linear mixed effect model
richmodel.p <- lmer(richness~Date + sitetype + Trap + (1|Site:Replicate), data=P)  #AIC = 813
rich.emm.t<-emmeans(richmodel.p,pairwise~Trap)
rich.emm.t
##Pollinator diversity linear model
divmodel.p <- lmer(diversity~Date + sitetype + Trap + (1|Site:Replicate), data=P)  #AIC = -101
div.emm.t<-emmeans(divmodel.p,pairwise~Trap)
div.emm.t
##Natural enemy richness linear model
richmodel.n <- lmer(richness~Date + sitetype + Trap + (1|Site:Replicate), data=NE)  #AIC = 1104
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
##Natural enemy diversity linear model
divmodel.n <- lmer(diversity~Date + sitetype + Trap + (1|Site:Replicate), data=NE)  #AIC = 275
div.emm.t<-emmeans(divmodel.n,pairwise~Trap)
div.emm.t
rich.emm<-emmeans(richmodel.p,pairwise~sitetype) #comparing natural vs GR
rich.emm.t<-emmeans(richmodel.p,pairwise~Trap)
rich.emm.t
div.emm.t<-emmeans(divmodel.p,pairwise~Trap)
div.emm.t
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
div.emm.t<-emmeans(divmodel.n,pairwise~Trap)
div.emm.t
#results: no difference except between bowl-ramp and ramp-sticky (maybe -- p=0.0564)
div.cld.t<-multcomp::cld(div.emm.t, alpha = 0.05, Letters = LETTERS)
div.cld.t
##Pollinator GR richness linear model
richmodel.p <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofpollinators)  #AIC = 402
#Pollinators
#add data subset for green roof sites
greenroofpollinators <- P[ which(P$sitetype=="Greenroof"), ]
#add column for green roof functional intent (stormwater-energy and biodiversity-ecological)
greenroofpollinators$design<-ifelse(greenroofpollinators$Site=="EWB", "SE",
ifelse(greenroofpollinators$Site=="WSC", "SE", "BE"))
str(greenroofpollinators)
##Pollinator GR richness linear model
richmodel.p <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofpollinators)  #AIC = 402
rich.emm.t<-emmeans(richmodel.p,pairwise~Trap)
rich.emm.t
##Pollinator GR diversity linear model
divmodel.p <- lmer(diversity~Date + design + Trap + (1|Site:Replicate), data=greenroofpollinators)  #AIC = -103
div.emm.t<-emmeans(divmodel.p,pairwise~Trap)
div.emm.t
greenroofNE <- NE[ which(NE$sitetype=="Greenroof"), ]
#add column for green roof functional intent (stormwater-energy and biodiversity-ecological)
greenroofNE$design<-ifelse(greenroofNE$Site=="EWB", "SE",
ifelse(greenroofNE$Site=="WSC", "SE", "BE"))
str(greenroofNE)
##Natural GR enemy richness linear model
richmodel.n <- lmer(richness~Date + design + Trap + (1|Site:Replicate), data=greenroofNE)  #AIC = 569
summary(richmodel.n)
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
##Natural enemy diversity linear model
divmodel.n <- lmer(diversity~Date + design + Trap + (1|Site:Replicate), data=greenroofNE)  #AIC = 129
div.emm.t<-emmeans(divmodel.n,pairwise~Trap)
div.emm.t
rich.emm.t<-emmeans(richmodel.n,pairwise~Trap)
rich.emm.t
